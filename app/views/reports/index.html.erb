<div class="container-fluid conteiner">
    <h1>Reportes</h1>
    <div>
        <%= link_to 'Agregar Reporte', new_report_path %>
        <%= link_to 'Categorias', categories_path if Current.user::admin==true%>
        <%= link_to 'Usuarios', users_path if Current.user::admin==true%>
    </div>

    <div>
        <%= form_with url: reports_path, method: :get do |form|%>
            <%= form.select :filter,options_for_select([["Ninguno",""],["Todos","all"],["Hoy","today"],["Esta semana","week"]],params[:filter]), {},
            { onChange: 'this.form.requestSubmit()'}%>
            <%= form.select :visibilidad,options_for_select([["Todos","Todos"],["Vistos",true],["No vistos",false]],params[:visibilidad]), {},
            { onChange: 'this.form.requestSubmit()'} if  Current.user::admin%>   
        <%end%>
    </div>

    <%= turbo_frame_tag "Listado-#{@pagy.page}", class: 'reports' do%>

        <%= render partial:'report', collection: @reports%>
        <%= turbo_frame_tag "Listado-#{@pagy.next}", class: 'reports', src: 
        pagy_url_for(@pagy,@pagy.next), loading: :lazy if @pagy.next%>
    <%end%>

</div>


